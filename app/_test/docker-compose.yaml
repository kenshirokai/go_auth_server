version: '3'
services: 
    testdb:
        image: postgres
        hostname: 'testdb'
        container_name: 'auth_server_testdb'
        environment: 
            - POSTGRES_USER=postgres
            - POSTGRES_PASSWORD=postgres
        ports: 
            - 15434:5432
        restart: "always"
        tty: true
        volumes: 
            - auth_server_testdb_volume:/var/lib/postgresql/data
    testredis:
        image: redis
        hostname: 'testredis'
        tty: true
        ports:
            - 6390:6379
        volumes: 
            - auth_server_redis_volume:/data
            - ./init_redis/:/docker-entrypoint.sh
        restart: always
volumes: 
    auth_server_testdb_volume:
        driver: "local"
    auth_server_redis_volume:
        driver: "local"
